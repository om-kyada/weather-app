<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <link rel="shortcut icon" href="./assets/images/weather-app.png" type="image/x-icon">
    <link rel="stylesheet" href="./assets/styles/weather.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>
    <div class="weather-container">
        <!-- <div class="weather-background-images"></div> -->
        <!-- <img class="weather-background-images" src="./assets/images/E3K8.gif" alt=""> -->
        <div class="weather">
            <div class="weather-header">
                <div class="weather-header-current-title">Weather
                </div>
                <div class="weather-header-enter-city-name">
                    <div class="enter-city-div">

                        <input type="text" id="enter-city" placeholder="Enter city name">
                        <i class="fa-solid fa-magnifying-glass" id="search-city"></i>
                    </div>
                </div>
            </div>
            <div class="weather-description">
                <div class="weather-description-back-img">
                    <div class="weather-data">
                        <div class="weather-current-data">
                            <!-- <i class="fa-solid fa-sun"></i> -->
                            <img class="icon" src="https://openweathermap.org/img/wn/01d@2x.png" alt="sun">
                            <p class="current-temperature">24°C</p>
                            <p class="current-main">Clear sky</p>
                        </div>
                        <div class="weather-sunrise-sunset-time">
                            <!-- <audio autoplay controls loop preload="none">

                                <source src="./assets/audio/clear.mp3">
                            </audio> -->
                            <p class="sunrise-time">Sunrise: 6:35 AM</p>
                            <p class="sunset-time">Sunset: 7:28 PM</p>
                            <p class="location"> Location: Surat</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="weather-data-humanity">

                <div class="weather-min-max-temp">
                    <div class="weather-min-temp"><img class="pressure-icon" src="./assets/images/pressure.png">
                        <div>
                            <p>Pressure: </p>
                            <span>1001mb</span>
                        </div>
                    </div>

                    <div class="weather-max-temp"><i class="fa-solid fa-eye"></i>
                        <div>
                            <p>Wind Speed:</p>
                            <span>40</span>
                        </div>
                    </div>
                </div>
                <div class="humidity-wind-speed">
                    <div class="weather-humidity"><i class="fa-solid fa-droplet"></i>
                        <div>
                            <p>Humidity: </p><span>64%</span>
                        </div>
                    </div>
                    <div class="wind-speed"><i class="fa-solid fa-wind temp-icon"></i>
                        <div>
                            <p>Wind Speed: </p><span>7 km/h</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="weather-chart">
                <div id="chartContainer" style="height: 300px; width: 100%;"></div>
            </div>
        </div>
    </div>
    <script src="./assets/script/weather.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script> -->
    <script src="https://cdn.canvasjs.com/ga/canvasjs.min.js"></script>
    <script>
        var array = []

        fetch(`https://api.openweathermap.org/data/2.5/forecast?q=surat&appid=e02a9a7f8d52c66794a09c113a6baca5&units=metric`)
            .then((response) => response.json())
            .then((response) => {
                console.log(response, "00000000000")
                const dateTime = response.list;
                // console.log(dateTime)
                Object.values(dateTime).forEach((dateList) => {
                    var date = new Date(dateList.dt);
                    var temp = dateList.main.temp;
                    console.log(date)
                    for (var i = 10; i < date.length; i++) {
                        //console.log(date)
                        array.push({ x: new Date(date[i]), y: temp });
                        console.log(array)
                    } console.log(array.push({ x: new Date(date[i]), y: temp }))
                });
            })



        var chart = new CanvasJS.Chart("chartContainer", {
            animationEnabled: true,
            title: {
                text: "Daily High Temperature at Different Beaches"
            },
            axisX: {
                valueFormatString: "DD MMM,YY"
            },
            axisY: {
                title: "Temperature (in °C)",
                suffix: " °C"
            },
            legend: {
                // cursor: "pointer",
                fontSize: 16
                // itemclick: toggleDataSeries
            },
            toolTip: {
                shared: true
            },
            data: [{
                name: "Myrtle Beach",
                type: "spline",
                yValueFormatString: "#0.## °C",
                showInLegend: true,
                dataPoints: array
                // [{ x: new Date(2017, 6, 24), y: 31 },
                // { x: new Date(2017, 6, 25), y: 31 },
                // { x: new Date(2017, 6, 26), y: 29 },
                // { x: new Date(2017, 6, 27), y: 29 },
                // { x: new Date(2017, 6, 28), y: 31 },
                // { x: new Date(2017, 6, 29), y: 30 },
                // { x: new Date(2017, 6, 30), y: 29 }]

            }
                // {
                //     name: "Martha Vineyard",
                //     type: "spline",
                //     yValueFormatString: "#0.## °C",
                //     showInLegend: true,
                //     dataPoints: [
                //         { x: new Date(2017, 6, 24), y: 20 },
                //         { x: new Date(2017, 6, 25), y: 20 },
                //         { x: new Date(2017, 6, 26), y: 25 },
                //         { x: new Date(2017, 6, 27), y: 25 },
                //         { x: new Date(2017, 6, 28), y: 25 },
                //         { x: new Date(2017, 6, 29), y: 25 },
                //         { x: new Date(2017, 6, 30), y: 25 }
                //     ]
                // },
                // {
                //     name: "Nantucket",
                //     type: "spline",
                //     yValueFormatString: "#0.## °C",
                //     showInLegend: true,
                //     dataPoints: [
                //         { x: new Date(2017, 6, 24), y: 22 },
                //         { x: new Date(2017, 6, 25), y: 19 },
                //         { x: new Date(2017, 6, 26), y: 23 },
                //         { x: new Date(2017, 6, 27), y: 24 },
                //         { x: new Date(2017, 6, 28), y: 24 },
                //         { x: new Date(2017, 6, 29), y: 23 },
                //         { x: new Date(2017, 6, 30), y: 23 }
                //     ]
                // }
            ]
        });
        chart.render();

            // function toggleDataSeries(e) {
            //     if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
            //         e.dataSeries.visible = false;
            //     }
            //     else {
            //         e.dataSeries.visible = true;
            //     }
            //     chart.render();
            // }

        // var xyValues = [
        //     { x: 50, y: 7 },
        //     { x: 60, y: 8 },
        //     { x: 70, y: 8 },
        //     { x: 80, y: 9 },
        //     { x: 90, y: 9 },
        //     { x: 100, y: 9 },
        //     { x: 110, y: 10 },
        //     { x: 120, y: 11 },
        //     { x: 130, y: 14 },
        //     { x: 140, y: 14 },
        //     { x: 150, y: 15 }
        // ];

        // new Chart("myChart", {
        //     type: "scatter",
        //     data: {
        //         datasets: [{
        //             pointRadius: 4,
        //             pointBackgroundColor: "rgb(0,0,255)",
        //             data: xyValues
        //         }]
        //     },
        //     options: {
        //         legend: { display: false },
        //         scales: {
        //             yAxes: [{
        //                 ticks: {
        //                     beginAtZero: false,
        //                     stepSize: 0.1
        //                 },
        //                 scaleLabel: {
        //                     display: true,
        //                     labelString: 'accelero-x (mV/g)'
        //                 }
        //             }],
        //             xAxes: [{

        //                 display: true,
        //                 type: "time",
        //                 time: {
        //                     min: moment(startDate).toDate(),//Date object type
        //                     max: moment(endDate).toDate()//Date object type
        //                 },
        //                 scaleLabel: {
        //                     display: true,
        //                     labelString: 'Time (hour)'
        //                 }
        //             }]
        //         }
        //     }
        // });


        // var array = [], chart;
        // $.getJSON("https://api.openweathermap.org/data/2.5/forecast?q=surat&appid=e02a9a7f8d52c66794a09c113a6baca5&units=metric", function (chartTemp) {

        //     const dateTime = chartTemp.list;
        //     Object.values(dateTime).forEach((dateList) => {
        //         //console.log(dateList.dt)
        //         var date = new Date(dateList.dt);
        //         var temp = dateList.main.temp;
        //         console.log(date)
        //         for (var i = 10; i < date.length; i++) {
        //             //console.log(date)
        //             array.push({ x: new Date(date[i]), y: temp });
        //             // console.log(array)
        //         } console.log(array.push({ x: new Date(date[i]), y: temp }))


        //     })

        //     //console.log(dateTime);

        //     chart = new CanvasJS.Chart("chart", {
        //         title: {
        //             text: "Chart from External JSON Data"
        //         },
        //         data: [
        //             {
        //                 type: "spline",
        //                 dataPoints: array
        //             }
        //         ]
        //     });
        //     chart.render();
        // });

    </script>

</body>

</html>